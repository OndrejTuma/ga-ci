name: Set Env

on:
  workflow_dispatch:
    inputs:
      environment:
        required: true
        type: choice
        description: Environment
        options:
          - Development
          - QA
          - UAT
          - Production

jobs:
  set:
    runs-on: ubuntu-latest
    env:
      TARGET_ENVIRONMET: >
        ${{ fromJson('{
          "Development": "dev",
          "Production": "prod"
        }')[github.event.inputs.environment] }}
    steps:
      - uses: kanga333/variable-mapper@master
        id: export
        with:
          key: "${{ github.event.inputs.environment }}"
          map: |
            {
              "Development": {
                "environment": "dev"
              },
              "Production": {
                "environment": "prod"
              }
            }
          export_to: env,output

      - run: echo "env var ${{ env.TARGET_ENVIRONMET }} and other ${{ env.environment }}"

